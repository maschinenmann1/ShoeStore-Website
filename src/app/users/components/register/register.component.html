<div class="pb-5">

    <div class="titleBg">
        <h1>Register</h1>
    </div>

    <form class="container-xl needs-validation" [formGroup]="userForm" (ngSubmit)="onSubmit()">

        <div class="d-flex justify-content-center">
            <div *ngIf="generalError" class="w-75 mt-4 alert alert-danger text-center" role="alert">
                Completa el formulario correctamente
            </div>
        </div>

        <div class="row">


            <div class="p-4 col-12 col-sm-4">
                <label class="d-block">Nombre:</label>
                <input type="text" class="form-control" 
                        [ngClass]="getValidityClass(userForm.get('name'))"
                        placeholder="Nombre" id="nombre" formControlName="name">
                    
                <div class="valid-feedback">
                    Looks good!
                </div>
                <div class="invalid-feedback">
                    Nombre es obligatorio
                </div>
            </div>

            <div class="p-4 col-12 col-sm-4">
                <label class="d-block">Apellidos: </label>
                <input type="text" class="form-control"
                        [ngClass]="getValidityClass(userForm.get('lastname'))"
                        placeholder="Apellidos" id="apellidos" formControlName="lastname">
                <div class="valid-feedback">
                    Looks good!
                </div>
                <div class="invalid-feedback">
                    Apellido es Obligatorio
                </div>
            </div>
            
            <div class="p-4 col-12 col-sm-4">
                <label class="d-block">Email: </label>
                <input type="mail" class="form-control"
                        [ngClass]="getValidityClass(userForm.get('email'))"
                        placeholder="Email" id="email" formControlName="email">
                <div class="valid-feedback">
                    Looks good!
                </div>
                <div class="invalid-feedback">
                    <div *ngIf="userForm.get('email').invalid && 
                            (userForm.get('email').dirty || userForm.get('email').touched)">
                        <div *ngIf="userForm.get('email').errors.required">El email es obligatorio</div>
                        <div *ngIf="userForm.get('email').errors.email">Email inválido</div>
                        <div *ngIf="userForm.get('email').errors.emailTaken as error">{{error}}</div>
                    </div>
                </div>   
            </div>      
            
        </div>


        <app-direction formControlName="address"></app-direction>
    
        <div class="row">
            <div class="p-4 col-12">
                <label class="d-block">Teléfono:  </label>
                <input type="tel" class="form-control" 
                        [ngClass]="getValidityClass(userForm.get('phone'))"
                        id="phone" placeholder="Teléfono" formControlName="phone">
                <div class="valid-feedback">
                    Looks good!
                </div>
                <div class="invalid-feedback">
                    <div *ngIf="userForm.get('phone').invalid && 
                            (userForm.get('phone').dirty || userForm.get('phone').touched)">
                        <div *ngIf="userForm.get('phone').errors.required">El teléfono es obligatorio</div>
                        <div *ngIf="userForm.get('phone').errors.maxlength || userForm.get('phone').errors.minlength">Debe ser de long 9</div>
                        <div *ngIf="userForm.get('phone').errors.pattern">Debe empezar por 6 o 7</div>
                    </div>
                </div>
            </div>

            <div class="p-4 col-12 col-sm-6">
                <label class="d-block" for="password">Contraseña: </label>
                <input type="password" class="form-control"
                        [ngClass]="getValidityClass(userForm.get('password'))"
                        id="password" placeholder="Contraseña" formControlName="password">
                <div class="valid-feedback">
                    Looks good!
                </div>
                <div class="invalid-feedback">
                    La contraseña es obligatoria
                </div>
            </div>

            <div class="p-4 col-12 col-sm-6"> 
                <label class="d-block"> Repite contraseña: </label>
                <input type="password" class="form-control" 
                        [ngClass]="getValidityClass(userForm.get('repeatPassword'))"
                        id="password-rep" placeholder="Contraseña" formControlName="repeatPassword">
                <div class="valid-feedback">
                    Looks good!
                </div>
                <div class="invalid-feedback">
                    <div *ngIf="userForm.get('repeatPassword').invalid && 
                                (userForm.get('repeatPassword').dirty || userForm.get('repeatPassword').touched)">
                        <div *ngIf="userForm.get('repeatPassword').errors.required">Es obligatorio repetir la contraseña</div>
                        <div *ngIf="userForm.get('repeatPassword').errors.passwordError as error">{{error}}</div>
                    </div>
                    
                </div>
            </div>
        </div>


        <div class="d-flex justify-content-center">
            <button type="submit" class="w-25 mt-3 mb-5">Crear</button>
        </div>

    </form>
    
</div>